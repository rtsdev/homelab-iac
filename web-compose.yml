version: "3.8"

networks:
  web:
    name: web
  db:
    name: db

services:
  ghost:
    container_name: ghost
    environment:
      database__client: sqlite3
      database__connection__filename: content/data/ghost.db
      database__useNullAsDefault: true
      database__debug: false
      url: http://localhost:2368
      NODE_ENV: development
    hostname: ghost
    image: ghost:3-alpine
    ports:
      - "2368:2368"
    restart: unless-stopped
    networks:
      - web
    volumes:
      - /data/ghost:/var/lib/ghost/content
    labels:
      com.centurylinklabs.watchtower.monitor-only: "true"

  swag:
    cap_add:
      - NET_ADMIN
    container_name: swag
    environment:
      PUID: 911
      PGID: 911
      TZ: America/New_York
      URL: ${SWAG_URL}
      SUBDOMAINS: wildcard
      VALIDATION: dns
      DNSPLUGIN: digitalocean
      EMAIL: ${SWAG_EMAIL}
      DHLEVEL: 2048
      ONLY_SUBDOMAINS: false
      EXTRA_DOMAINS: ${SWAG_EXTRA_DOMAINS}
      STAGING: false
    hostname: swag
    image: lscr.io/linuxserver/swag:latest
    ports:
      - "80:80"
      - "443:443"
    restart: unless-stopped
    networks:
      - web
    volumes:
      - /data/swag:/config
    labels:
      com.centurylinklabs.watchtower.monitor-only: "true"
